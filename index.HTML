<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ò–õ24 Support</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root {
            --bg: var(--tg-theme-bg-color, #f5f5f5);
            --text: var(--tg-theme-text-color, #222);
            --sec-bg: var(--tg-theme-secondary-bg-color, #ffffff);
            --btn: var(--tg-theme-button-color, #3390ec);
            --btn-text: var(--tg-theme-button-text-color, #ffffff);
        }
        body { background-color: var(--bg); color: var(--text); font-family: sans-serif; transition: all 0.3s; }
        .card { background: var(--sec-bg); border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        input, textarea { background: var(--bg); color: var(--text); border: 1px solid rgba(0,0,0,0.1); width: 100%; border-radius: 8px; padding: 10px; }
    </style>
</head>
<body class="p-4">
    <div id="app" class="animate__animated animate__fadeIn">
        <div class="card p-4 mb-4 animate__animated animate__slideInLeft">
            <h2 id="n-title" class="font-bold text-blue-500 mb-1 italic text-lg uppercase tracking-tight">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            <p id="n-text" class="text-sm opacity-80 mb-2"></p>
            <span id="n-date" class="text-[10px] opacity-40"></span>
        </div>

        <div class="card p-4 animate__animated animate__slideInUp animate__delay-1s">
            <h3 class="font-bold mb-3">üßî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ò–õ24</h3>
            <div class="space-y-3">
                <input type="text" id="subj" placeholder="–¢–µ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ù–æ—É—Ç–±—É–∫)">
                <textarea id="msg" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É..."></textarea>
                <button onclick="send()" id="main-btn" class="w-full font-bold p-3 rounded-xl shadow-lg transition-transform active:scale-95">
                    –û–¢–ü–†–ê–í–ò–¢–¨ –ú–ê–°–¢–ï–†–£
                </button>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏
        const btn = document.getElementById('main-btn');
        btn.style.backgroundColor = "var(--btn)";
        btn.style.color = "var(--btn-text)";

        // –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById('n-title').innerText = urlParams.get('news_title') || "–ò–õ24 –ù–æ–≤–æ—Å—Ç–∏";
        document.getElementById('n-text').innerText = urlParams.get('news_text') || "–ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –≤–∞–∂–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.";
        document.getElementById('n-date').innerText = urlParams.get('news_date') || "";

        function send() {
            const s = document.getElementById('subj').value;
            const m = document.getElementById('msg').value;
            
            if(!s || !m) {
                tg.HapticFeedback.notificationOccurred('error');
                alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
                return;
            }

            const payload = JSON.stringify({type: "ticket", subject: s, message: m});
            
            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
            tg.sendData(payload);
            // –ï—Å–ª–∏ WebApp –æ—Ç–∫—Ä—ã—Ç —á–µ—Ä–µ–∑ Inline –∫–Ω–æ–ø–∫—É, sendData –º–æ–∂–µ—Ç –Ω–µ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ,
            // –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ–≥–æ —á–µ—Ä–µ–∑ 100–º—Å
            setTimeout(() => { tg.close(); }, 150);
        }
    </script>
</body>
</html>